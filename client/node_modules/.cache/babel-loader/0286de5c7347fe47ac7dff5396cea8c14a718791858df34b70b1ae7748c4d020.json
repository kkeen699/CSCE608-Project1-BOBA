{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import UserService from\"../services/user.service\";import{useUser}from\"../context/user-context\";import\"./style.css\";import\"https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=props=>{const{user,setUser}=useUser();const navigate=useNavigate();let[email,setEmail]=useState(\"\");let[password,setPassword]=useState(\"\");let[message,setMessage]=useState(\"\");const[passwordShown,setPasswordShown]=useState(false);const handleChangeEmail=e=>{setEmail(e.target.value);};const handleChangePassword=e=>{setPassword(e.target.value);};const togglePassword=()=>{setPasswordShown(!passwordShown);};const handleLogin=()=>{UserService.login(email,password).then(response=>{/// jwt in local storage\nif(response.data.token){localStorage.setItem(\"user\",JSON.stringify(response.data));}window.alert(\"Login successfully, you are now redirected to the home page.\");// props.setLoginState(UserService.isLogin());\nsetUser(UserService.isLogin());navigate(\"/home\");}).catch(error=>{console.log(error.response);setMessage(error.response.data);});};useEffect(()=>{if(user)navigate(\"/home\",{replace:true});},[user]);return/*#__PURE__*/_jsx(\"div\",{style:{padding:\"3rem\"},className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"screen-1\",children:[message&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:message}),/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"logo\",children:\"Login Portal\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sec-2\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"mail-outline\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"input\",{onChange:handleChangeEmail,type:\"text\",name:\"email\",placeholder:\"username@email.com\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"password\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sec-2\",children:[/*#__PURE__*/_jsx(\"ion-icon\",{name:\"lock-closed-outline\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"input\",{onChange:handleChangePassword,type:passwordShown?\"text\":\"password\",name:\"password\",placeholder:\"..........\"}),/*#__PURE__*/_jsx(\"ion-icon\",{onClick:togglePassword,name:passwordShown?\"eye-outline\":\"eye-off-outline\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"loginButton\",id:\"login\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Register\"})})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","UserService","useUser","jsx","_jsx","jsxs","_jsxs","Login","props","user","setUser","navigate","email","setEmail","password","setPassword","message","setMessage","passwordShown","setPasswordShown","handleChangeEmail","e","target","value","handleChangePassword","togglePassword","handleLogin","login","then","response","data","token","localStorage","setItem","JSON","stringify","window","alert","isLogin","catch","error","console","log","replace","style","padding","className","children","role","htmlFor","name","onChange","type","placeholder","onClick","id","href"],"sources":["/home/kcheng/Desktop/CSCE608-Project1-BOBA/client/src/components/login-component.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport UserService from \"../services/user.service\";\nimport { useUser } from \"../context/user-context\";\nimport \"./style.css\";\nimport \"https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js\"\n\nconst Login = (props) => {\n  const {user, setUser} = useUser();\n\tconst navigate = useNavigate();\n  let [email, setEmail] = useState(\"\");\n  let [password, setPassword] = useState(\"\");\n  let [message, setMessage] = useState(\"\");\n  const [passwordShown, setPasswordShown] = useState(false);\n\n  const handleChangeEmail = (e) => {\n    setEmail(e.target.value);\n  };\n\n  const handleChangePassword = (e) => {\n    setPassword(e.target.value);\n  };\n\n  const togglePassword = () => {\n    setPasswordShown(!passwordShown);\n  };\n\n  const handleLogin = () => {\n    UserService.login(email, password)\n      .then((response) => {\n        /// jwt in local storage\n        if (response.data.token) {\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n        }\n        window.alert(\n          \"Login successfully, you are now redirected to the home page.\"\n        );\n        // props.setLoginState(UserService.isLogin());\n        setUser(UserService.isLogin());\n        navigate(\"/home\");\n      })\n      .catch((error) => {\n        console.log(error.response);\n        setMessage(error.response.data);\n      });\n  };\n\n  useEffect(() => {\n    if(user)\n      navigate(\"/home\", {replace: true});\n  }, [user])\n\n\n  return (\n    <div style={{ padding: \"3rem\" }} className=\"login\">\n      \t<div className=\"screen-1\">\n\t\t  \t{message && ( <div className=\"alert alert-danger\" role=\"alert\">{message}</div>)}\n        \t<center><span className=\"logo\">Login Portal</span></center>\n\t\t\t<br />\n\t\t\t<div className=\"email\">\n\t\t\t\t<label htmlFor=\"email\">Email</label>\n\t\t\t\t<div className=\"sec-2\">\n\t\t\t\t\t<ion-icon name=\"mail-outline\"></ion-icon>\n\t\t\t\t\t&nbsp;\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={handleChangeEmail}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\tplaceholder=\"username@email.com\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<div className=\"password\">\n\t\t\t\t<label htmlFor=\"password\">Password</label>\n\t\t\t\t<div className=\"sec-2\">\n\t\t\t\t\t<ion-icon name=\"lock-closed-outline\"></ion-icon>\n\t\t\t\t\t&nbsp;\n\t\t\t\t\t<input\n\t\t\t\t\t\tonChange={handleChangePassword}\n\t\t\t\t\t\ttype={passwordShown ? \"text\" : \"password\"}\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\tplaceholder=\"..........\"\n\t\t\t\t\t/>\n\t\t\t\t\t<ion-icon onClick={togglePassword} name={passwordShown ? \"eye-outline\" : \"eye-off-outline\"}></ion-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<br />\n\t\t\t<button className=\"loginButton\" id=\"login\" onClick={handleLogin}>Login</button>\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t<div className=\"footer\">\n\t\t\t\t<a href=\"/register\">Register</a>\n\t\t\t</div>\n\t\t</div>\n    </div>\n  );\n};\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
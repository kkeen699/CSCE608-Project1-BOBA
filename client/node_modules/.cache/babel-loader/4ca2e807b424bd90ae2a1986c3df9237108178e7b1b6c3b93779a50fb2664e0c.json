{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import RecipeService from\"../../services/recipe.service\";import{Col,Container,Row,Image}from\"react-bootstrap\";import\"../style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const RecipePage=()=>{const[recipe,setRecipe]=useState({name:\"\",post_time:\"\",steps:\"\"});const[ingrs,setIngrs]=useState([]);const[cats,setCats]=useState([]);const{recipeId}=useParams();useEffect(()=>{RecipeService.getRecipeItem(recipeId).then(_ref=>{let{data}=_ref;setIngrs(data);}).catch(err=>{console.log(err);});RecipeService.getRecipeCat(recipeId).then(_ref2=>{let{data}=_ref2;setCats(data);}).catch(err=>{console.log(err);});RecipeService.getRecipe(recipeId).then(_ref3=>{let{data}=_ref3;setRecipe(data[0]);}).catch(err=>{console.log(err);});},[recipeId]);return/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(Container,{className:\"py-5\",children:[/*#__PURE__*/_jsx(Title,{recipe:recipe,cats:cats}),/*#__PURE__*/_jsx(RecipeImage,{}),/*#__PURE__*/_jsx(Description,{desc:recipe.desc}),/*#__PURE__*/_jsx(Ingredients,{ingrs:ingrs}),/*#__PURE__*/_jsx(Steps,{steps:recipe.steps})]})});};const Title=_ref4=>{let{recipe,cats}=_ref4;const[like,setLike]=useState(false);const[nliked,setNliked]=useState(0);const cat=cats.map(cat=>cat.name);const handleLiked=()=>{if(like){RecipeService.deleteLiked(recipe.id);setNliked(nliked-1);}else{RecipeService.addLiked(recipe.id);setNliked(nliked+1);}setLike(!like);};useEffect(()=>{if(recipe.nliked)setNliked(recipe.nliked);if(recipe.id)RecipeService.getLiked(recipe.id).then(_ref5=>{let{data}=_ref5;data.length===0?setLike(false):setLike(true);}).catch(err=>{console.log(err);});},[recipe]);return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{as:\"h2\",children:[\" \",recipe.name.toUpperCase(),\" \"]}),/*#__PURE__*/_jsx(Col,{className:\"text-end\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-round\",onClick:handleLiked,children:[!like&&/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-heart\"}),like&&/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-heart-fill text-danger\"})]})}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{as:\"h5\",children:[\" Liked: \",nliked]}),/*#__PURE__*/_jsxs(Col,{className:\"text-end\",as:\"p\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/recipes/user/\".concat(recipe.user),children:recipe.user_name}),\", \",recipe.post_time.substring(0,10)]})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{as:\"h5\",children:[\" \",cat.join(', '),\" \"]})})]});};const RecipeImage=()=>{return/*#__PURE__*/_jsx(Container,{className:\"py-2\",style:{\"textAlign\":\"center\"},children:/*#__PURE__*/_jsx(Image,{src:\"../boba.jpg\"})});};const Description=_ref6=>{let{desc}=_ref6;return/*#__PURE__*/_jsxs(Container,{className:\"py-2 px-5\",style:{\"fontSize\":\"15pt\"},children:[/*#__PURE__*/_jsx(Row,{as:\"h3\",children:\" Description: \"}),/*#__PURE__*/_jsxs(Row,{className:\"px-3\",children:[\" \",desc,\" \"]})]});};const Ingredients=_ref7=>{let{ingrs}=_ref7;const ingrsName=ingrs.map(ingr=>ingr.name);return/*#__PURE__*/_jsxs(Container,{className:\"py-2 px-5\",style:{\"fontSize\":\"15pt\"},children:[/*#__PURE__*/_jsx(Row,{as:\"h3\",children:\" Ingredients: \"}),/*#__PURE__*/_jsxs(Row,{className:\"px-3\",children:[\" \",ingrsName.join(', '),\" \"]})]});};const Steps=_ref8=>{let{steps}=_ref8;return/*#__PURE__*/_jsxs(Container,{className:\"py-2 px-5\",style:{\"fontSize\":\"15pt\"},children:[/*#__PURE__*/_jsx(Row,{as:\"h3\",children:\" Steps: \"}),/*#__PURE__*/_jsx(Row,{className:\"px-3\",children:/*#__PURE__*/_jsx(\"ol\",{children:steps.split('\\n').map((step,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[\" \",step,\" \"]},idx))})})]});};export default RecipePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","RecipeService","Col","Container","Row","Image","jsx","_jsx","jsxs","_jsxs","RecipePage","recipe","setRecipe","name","post_time","steps","ingrs","setIngrs","cats","setCats","recipeId","getRecipeItem","then","_ref","data","catch","err","console","log","getRecipeCat","_ref2","getRecipe","_ref3","children","className","Title","RecipeImage","Description","desc","Ingredients","Steps","_ref4","like","setLike","nliked","setNliked","cat","map","handleLiked","deleteLiked","id","addLiked","getLiked","_ref5","length","as","toUpperCase","onClick","href","concat","user","user_name","substring","join","style","src","_ref6","_ref7","ingrsName","ingr","_ref8","split","step","idx"],"sources":["/home/kcheng/Desktop/CSCE608-Project1-BOBA/client/src/components/recipe/recipePage-component.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport RecipeService from \"../../services/recipe.service\";\nimport { Col, Container, Row, Image } from \"react-bootstrap\";\nimport \"../style.css\";\n\nconst RecipePage = () => {\n  const [recipe, setRecipe] = useState({name: \"\", post_time: \"\", steps: \"\"});\n  const [ingrs, setIngrs] = useState([]);\n  const [cats, setCats] = useState([]);\n  const {recipeId} = useParams();\n  \n  useEffect(() => {\n    RecipeService.getRecipeItem(recipeId)\n    .then(({data}) => {\n      setIngrs(data);\n    }).catch((err) => {\n      console.log(err)\n    });\n\n    RecipeService.getRecipeCat(recipeId)\n    .then(({data}) => {\n      setCats(data);\n    }).catch((err) => {\n      console.log(err)\n    });\n\n    RecipeService.getRecipe(recipeId)\n    .then(({data}) => {\n      setRecipe(data[0])\n    }).catch((err) => {\n      console.log(err)\n    });\n  }, [recipeId]);\n\n  return (\n    <main>\n      <Container className=\"py-5\">\n        <Title recipe={recipe} cats={cats}/>\n        <RecipeImage />\n        <Description desc={recipe.desc}/>\n        <Ingredients ingrs={ingrs}/>\n        <Steps steps={recipe.steps}/>\n      </Container>\n    </main>\n  );\n};\n\nconst Title = ({recipe, cats}) => {\n  const [like, setLike] = useState(false);\n  const [nliked, setNliked] = useState(0)\n  const cat = cats.map((cat) => cat.name);\n\n  const handleLiked = () => {\n    if(like){\n      RecipeService.deleteLiked(recipe.id);\n      setNliked(nliked-1);\n    }\n    else{\n      RecipeService.addLiked(recipe.id);\n      setNliked(nliked+1);\n    }\n    setLike(!like);\n  }\n\n  useEffect(() => {\n    if(recipe.nliked)\n      setNliked(recipe.nliked)\n    if(recipe.id)\n      RecipeService.getLiked(recipe.id)\n      .then(({data}) => {\n        data.length === 0 ? setLike(false) : setLike(true);\n      }).catch((err) => {\n        console.log(err)\n      });\n  }, [recipe]);\n  return(\n    <Container>\n      <Row>\n        <Col as=\"h2\"> {recipe.name.toUpperCase()} </Col>\n        <Col className=\"text-end\">\n          <button className=\"btn btn-round\" onClick={handleLiked}>\n            {!like && (<i className=\"bi bi-heart\"></i>)}\n            {like && (<i className=\"bi bi-heart-fill text-danger\"></i>)}\n          </button>\n        </Col>\n        <hr/>\n      </Row>\n      <Row>\n        <Col as=\"h5\"> Liked: {nliked}</Col>\n        <Col className=\"text-end\" as=\"p\">\n          <a href={`/recipes/user/${recipe.user}`}>{recipe.user_name}</a>\n          , {recipe.post_time.substring(0,10)}\n        </Col>\n      </Row>\n      <Row>\n        <Col as=\"h5\"> {cat.join(', ')} </Col>\n      </Row>\n    </Container>\n  );\n};\n\nconst RecipeImage = () => {\n  return(\n    <Container className=\"py-2\" style={{\"textAlign\": \"center\"}}>\n      <Image src=\"../boba.jpg\"/>\n    </Container>\n  )\n}\n\nconst Description = ({desc}) => {\n  return(\n    <Container className=\"py-2 px-5\" style={{\"fontSize\": \"15pt\"}}>\n      <Row as=\"h3\"> Description: </Row>\n      <Row className=\"px-3\"> {desc} </Row>\n    </Container>\n  );\n};\n\nconst Ingredients = ({ingrs}) => {\n  const ingrsName = ingrs.map((ingr) => ingr.name);\n  return(\n    <Container className=\"py-2 px-5\" style={{\"fontSize\": \"15pt\"}}>\n      <Row as=\"h3\"> Ingredients: </Row>\n      <Row className=\"px-3\"> {ingrsName.join(', ')} </Row>\n    </Container>\n  );\n};\n\nconst Steps = ({steps}) => {\n  return(\n    <Container className=\"py-2 px-5\" style={{\"fontSize\": \"15pt\"}}>\n      <Row as=\"h3\"> Steps: </Row>\n      <Row className=\"px-3\"> \n        <ol>\n          {steps.split('\\n').map((step, idx) =>\n            <li key={idx}> {step} </li>\n          )}\n        </ol>\n      </Row>\n    \n    </Container>\n  );\n};\n\nexport default RecipePage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}